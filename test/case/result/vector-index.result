CREATE TABLE VT1 (ID INT, C1 VECTOR(3));
SUCCESS
INSERT INTO VT1 VALUES(1, '[1,1,1]');
SUCCESS
INSERT INTO VT1 VALUES(2, '[2,2,2]');
SUCCESS
INSERT INTO VT1 VALUES(3, '[3,3,3]');
SUCCESS
INSERT INTO VT1 VALUES(4, '[4,4,4]');
SUCCESS

SELECT * FROM VT1;
ID | C1
1 | [1,1,1]
2 | [2,2,2]
3 | [3,3,3]
4 | [4,4,4]

CREATE VECTOR INDEX V_I ON VT1(C1) WITH(TYPE = IVFFLAT, DISTANCE=L2_DISTANCE,LISTS=1,PROBES=1);
SUCCESS

SELECT * FROM VT1 ORDER BY L2_DISTANCE(C1, [1,1,0]) LIMIT 1;
ID | C1
1 | [1,1,1]

SELECT C1, L2_DISTANCE(C1, [1,1,0]) FROM VT1 ORDER BY L2_DISTANCE(C1, [1,1,0]) LIMIT 3;
C1 | L2_DISTANCE(C1, [1,1,0])
[1,1,1] | 1
[2,2,2] | 2.45
[3,3,3] | 4.12

SELECT C1, L2_DISTANCE(C1, [1,2,3]) FROM VT1 ORDER BY L2_DISTANCE(C1, [1,2,3]) LIMIT 3;
C1 | L2_DISTANCE(C1, [1,2,3])
[2,2,2] | 1.41
[3,3,3] | 2.24
[1,1,1] | 2.24
